#include <stdio.h>
#include <stdlib.h>

int count=0;

struct stack
{
    int Number;
    struct stack *target;
};

struct stack *Start = NULL;

void push();
int pop();
void peek();

int main()
{
    int ans;

    do
    {
        printf("Typr 1 to push an item\n");
        printf("Type 2 to pop an item\n");
        printf("Type 3 to peek the top item\n");
        printf("Type 4 to get the count of items\n");
        printf("Type 0 to exit\n");
        scanf("%d", &ans);
        getchar();
        switch (ans)
        {
        case 1: {push(); break;}
        case 2: {printf("Number %d popped\n", pop()); break;}
        case 3: {peek(); break;}
        case 4: {printf("Count: %d\n", count); break;}
        case 0: {printf("Goodbye"); break;}
        default: {printf("Invalid input"); break;}
        }
    } while (ans != 0);
    
    return 0;
}

void push()
{
    struct stack *p;
    int num;
    printf("Enter number: ");
    scanf("%d", &num);
    getchar();

    p = (struct stack*)malloc(sizeof(struct stack));
    p->Number = num;

    p->target = Start;
    Start = p;

    count++;

    return;
}

int pop()
{
    if (Start==NULL) {
        printf("Stack is empty\n");
        return 0;
    }

    int num = Start->Number;
    struct stack *p;
    
    p = Start->target;
    free(Start);
    Start = p;

    count--;

    return num;
}

void peek()
{
    if (Start==NULL) {
        printf("Stack is empty\n");
        return;
    }
    printf("The top item is %d\n\n", Start->Number);
    return;
}
